<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="TypePrefMstrDAO">

	<select id="selectListForTypePrefTree" parameterClass="java.util.Map" resultClass="java.util.HashMap">
		/* TypePrefMstrDAO.selectListForTypePrefTree */
		SELECT
			FLD_ID AS id
			, FLD_NM AS text
			, CONVERT(
				BIT
				, (SELECT COUNT(*) FROM WP2_TYPE_PREF_MSTR WHERE FLD_PARENT_ID = A.FLD_ID)
				) AS children
			, 'typePref' AS type
		FROM WP2_TYPE_PREF_MSTR A
		WHERE FLD_PARENT_ID = #FLD_PARENT_ID#
		ORDER BY FLD_ORDINAL
	</select>
</sqlMap>